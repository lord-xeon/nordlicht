/*	Operation Ultra - main jQuery plugins file for AWE stats
uncompressed version: ultra.js*/
function byteSize(b){var a=(parseInt(b))/1024;if(a<1024){a=a.toFixed(2);a+=' KB'}else{if(a/1024<1024){a=(a/1024).toFixed(2);a+=' MB'}else{(a/1024/1024).toFixed(3);a=addCommas(a);a+=' GB'}}return a}function addCommas(b){var a=/(\d+)(\d{3})/,c,d,e;b+='';c=b.split('.');d=c[0];e=c.length>1?'.'+c[1]:'';while(a.test(d)){d=d.replace(a,'$1,$2')}return d+e}function dateMake(b){if(isNaN(b)){when='not recorded'}else{var a=b,c=Array("January","February","March","April","May","June","July","August","September","October","November","December"),d=Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),e=a.substr(0,4),g=a.substr(4,2),h=a.substr(6,2),i=a.substr(8,2),j=a.substr(10,2),k=a.substr(12,2),f=new Date(e,g,h,i,j,k);when='';when=d[f.getDay()];when+=", "+c[f.getMonth()]+" "+h+", "+e;when+="<br />@ "+f.getHours()+":"+f.getMinutes()+":"+f.getMilliseconds()}return when}function countryFlag(b){var a='<img src="funn/img/country/'+b+'.png" alt="'+b+'" class="flag" />';a+=" "+b;return a}function drawTable(b,a){var c=getHeaders(b['headers']);$("#"+a).dataTable({"bDestroy":true,"aaData":b['data'],"aoColumns":c,"bSort":false,"iDisplayLength":37,"sPaginationType":"full_numbers","sDom":'<"dataTableTop"lif<"clear">>rtp'})}function getHeaders(a){var c=0,d=new Array();while(c<a.length){d[c]=new Array();d[c]['sTitle']=a[c];if(a[c]=='Bandwidth'){d[c]['fnRender']=function(b){return byteSize(b.aData[b.iDataColumn])}}else if(a[c]=='Last visit date'){d[c]['fnRender']=function(b){return dateMake(b.aData[b.iDataColumn])};d[c]['sClass']='date'}else if(a[c]=='Domain'){d[c]['fnRender']=function(b){return countryFlag(b.aData[b.iDataColumn])}}c++}return d}$(window).load(function(){$('#nav li').click(function(b){b.preventDefault();var a=$(this).children('a').attr('href');$.scrollTo($(a),{duration:500})});$('table td a').colorbox({iframe:true,width:'75%',height:'75%'});var l=new Date();$("#dayR").datepick({showAnim:'slideDown',showSpeed:'normal',pickerClass:'buffel',maxDate:0,popupContainer:'#navHead',alignment:'bottomLeft'});$("#siteSelect").msDropDown({mainCSS:'buffel'});$("#goToStats").click(function(b){$("#statsInfo").html();b.preventDefault();var a,c=$('#dayR').val(),d;a='stats-'+$('#siteSelect').val();if(c){d=c.split("/");a+='-'+d[0]+d[2]}$("#statsInfo").load(a+' #statsInfo')});$("a.fullList").click(function(a){a.preventDefault();var c=$(this),d=c.attr('data-fullList'),e=c.attr('data-frData'),g=c.attr('data-table'),h=$("#"+e).data(),i=$("#"+g).parent();if($("#"+e).length==0){var j=document.createElement('section'),k=document.createElement('table'),f=document.createElement('span');$(k).attr('id',g);$(f).attr('id',e);$(j).append(k).append(f);$('body').append(j);h=$("#"+e).data();i=$("#"+g).parent()}$.colorbox({inline:true,href:i,width:"95%",height:"80%",onOpen:function(){$(i).fadeIn('fast')},onCleanup:function(){$(i).fadeOut('fast')}});if(!h.data){$.getJSON('funn/fullRange/fullRange-builder.php',{surl:statsURL,day:dayR,what:d},function(b){$("#"+e).data(b);drawTable(h,g)})}})});
